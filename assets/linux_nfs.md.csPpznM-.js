import{_ as s,o as i,c as a,R as n}from"./chunks/framework.PTn1Zvbw.js";const g=JSON.parse('{"title":"Linux-NFS安装","description":"","frontmatter":{"layout":"doc","outline":"deep"},"headers":[],"relativePath":"linux/nfs.md","filePath":"linux/nfs.md"}'),h={name:"linux/nfs.md"},t=n(`<h1 id="linux-nfs安装" tabindex="-1">Linux-NFS安装 <a class="header-anchor" href="#linux-nfs安装" aria-label="Permalink to &quot;Linux-NFS安装&quot;">​</a></h1><h2 id="yum" tabindex="-1">yum <a class="header-anchor" href="#yum" aria-label="Permalink to &quot;yum&quot;">​</a></h2><h3 id="服务端" tabindex="-1">服务端 <a class="header-anchor" href="#服务端" aria-label="Permalink to &quot;服务端&quot;">​</a></h3><br><h4 id="安装-nfs" tabindex="-1">安装 NFS <a class="header-anchor" href="#安装-nfs" aria-label="Permalink to &quot;安装 NFS&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-utils</span></span></code></pre></div><h4 id="创建共享目录" tabindex="-1">创建共享目录 <a class="header-anchor" href="#创建共享目录" aria-label="Permalink to &quot;创建共享目录&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /nfs</span></span></code></pre></div><h4 id="配置-nfs" tabindex="-1">配置 NFS <a class="header-anchor" href="#配置-nfs" aria-label="Permalink to &quot;配置 NFS&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/exports</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># exports 文件添加配置</span></span>
<span class="line"><span>/nfs 客户端IP(rw,sync,no_root_squash)</span></span></code></pre></div><p>参数说明</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/nfs:共享目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ro:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 共享目录只读；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rw:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 共享目录可读可写；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all_squash:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 所有访问用户都映射为匿名用户或用户组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">no_root_squash：来访的root用户保持root账号权限</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">no_all_squash（默认）：访问用户先与本机用户匹配，匹配失败后再映射为匿名用户或用户组；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root_squash（默认）：将来访的root用户映射为匿名用户或用户组；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">anonuid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">：指定匿名访问用户的本地用户UID，默认为nfsnobody（65534）；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">anongid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">D</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">：指定匿名访问用户的本地用户组GID，默认为nfsnobody（65534）；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">secure（默认）：限制客户端只能从小于1024的tcp/ip端口连接服务器；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">insecure：允许客户端从大于1024的tcp/ip端口连接服务器；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sync：将数据同步写入内存缓冲区与磁盘中，效率低，但可以保证数据的一致性；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">async：将数据先保存在内存缓冲区中，必要时才写入磁盘；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wdelay（默认）：检查是否有相关的写操作，如果有则将这些写操作一起执行，这样可以提高效率；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">no_wdelay：若有写操作则立即执行，应与sync配合使用；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subtree_check（默认）</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ：若输出目录是一个子目录，则nfs服务器将检查其父目录的权限；</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">no_subtree_check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ：即使输出目录是一个子目录，nfs服务器也不检查其父目录的权限，这样可以提高效率；</span></span></code></pre></div><h4 id="启动-rpcbind-和-nfs" tabindex="-1">启动 rpcbind 和 nfs <a class="header-anchor" href="#启动-rpcbind-和-nfs" aria-label="Permalink to &quot;启动 rpcbind 和 nfs&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动 rpcbind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind.service</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置开机自启 rpcbind</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rpcbind.service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动 nfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs.service</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置开机自启 nfs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs.service</span></span></code></pre></div><h3 id="客户端" tabindex="-1">客户端 <a class="header-anchor" href="#客户端" aria-label="Permalink to &quot;客户端&quot;">​</a></h3><br><h4 id="安装-nfs-1" tabindex="-1">安装 NFS <a class="header-anchor" href="#安装-nfs-1" aria-label="Permalink to &quot;安装 NFS&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs-utils</span></span></code></pre></div><h4 id="挂载目录" tabindex="-1">挂载目录 <a class="header-anchor" href="#挂载目录" aria-label="Permalink to &quot;挂载目录&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务端IP:/nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /mnt/nfs</span></span></code></pre></div><h4 id="解除挂载" tabindex="-1">解除挂载 <a class="header-anchor" href="#解除挂载" aria-label="Permalink to &quot;解除挂载&quot;">​</a></h4><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> umount</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 服务端IP:/nfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/nfs</span></span></code></pre></div><h2 id="apt" tabindex="-1">apt <a class="header-anchor" href="#apt" aria-label="Permalink to &quot;apt&quot;">​</a></h2>`,24),l=[t];function e(p,k,d,r,F,o){return i(),a("div",null,l)}const y=s(h,[["render",e]]);export{g as __pageData,y as default};
